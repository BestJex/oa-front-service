(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2320392"],{"06db":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{centered:"",title:e.title,width:1200,visible:e.visible,cancelText:"关闭"},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-row",{attrs:{gutter:18}},[a("a-col",{attrs:{span:16}},[a("a-card",{attrs:{title:"选择人员",bordered:!0}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:10}},[a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{span:8}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchQuery}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:e.searchReset}},[e._v("重置")])],1)])],1)],1)],1),a("div",[a("a-table",{attrs:{size:"small",bordered:"",rowKey:"id",columns:e.columns1,dataSource:e.dataSource1,pagination:e.ipagination,loading:e.loading,scroll:{y:240},rowSelection:{selectedRowKeys:e.selectedRowKeys,onSelectAll:e.onSelectAll,onSelect:e.onSelect,onChange:e.onSelectChange}},on:{change:e.handleTableChange}})],1)])],1),a("a-col",{attrs:{span:8}},[a("a-card",{attrs:{title:"用户选择",bordered:!0}},[a("div",[a("a-table",{attrs:{size:"small",bordered:"",rowKey:"id",columns:e.columns2,dataSource:e.dataSource2,loading:e.loading,scroll:{y:240}},scopedSlots:e._u([{key:"action",fn:function(t,n){return a("span",{},[a("a-button",{attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(t){return e.handleDelete(n)}}},[e._v("删除")])],1)}}])})],1)])],1)],1)],1)},r=[],s=(a("ac6a"),a("456d"),a("96cf"),a("3b8d")),i=a("ca00"),o=a("0fea"),c={name:"JSelectMultiUserModal",data:function(){return{title:"用户列表",names:[],visible:!1,placement:"right",description:"人员管理页面",queryParam:{},columns1:[{title:"用户代码",align:"center",width:100,dataIndex:"username"},{title:"用户名称",align:"center",width:100,dataIndex:"realname"},{title:"邮箱",align:"center",width:180,dataIndex:"email"}],columns2:[{title:"用户账号",align:"center",width:100,dataIndex:"username"},{title:"操作",dataIndex:"action",align:"center",width:100,scopedSlots:{customRender:"action"}}],dataSource1:[],dataSource2:[],ipagination:{current:1,pageSize:30,pageSizeOptions:["30","50","80"],showTotal:function(e,t){return t[0]+"-"+t[1]+" 共"+e+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},isorter:{column:"username",order:"desc"},loading:!1,selectedRowKeys:[],selectedRows:[]}},created:function(){this.loadData()},methods:{searchQuery:function(){this.loadData(1)},searchReset:function(){this.queryParam={},this.loadData(1)},handleCancel:function(){this.visible=!1},handleOk:function(){this.$emit("selectFinished",this.dataSource2),this.visible=!1},add:function(){this.visible=!0},loadData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return 1===t&&(this.ipagination.current=1),a=this.getQueryParams(),e.next=4,Object(o["K"])(a);case 4:n=e.sent,this.dataSource1=n.records,this.ipagination.total=n.total;case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getQueryParams:function(){var e=Object.assign({},this.queryParam,this.isorter);return e.field=this.getQueryField(),e.pageNo=this.ipagination.current,e.pageSize=this.ipagination.pageSize,Object(i["c"])(e)},getQueryField:function(){},onSelectAll:function(e,t,a){if(!0===e)for(var n=0;n<a.length;n++)this.dataSource2.push(a[n]);else for(var r=0;r<a.length;r++)this.dataSource2.splice(this.dataSource2.indexOf(a[r]),1)},onSelect:function(e,t){if(!0===t)this.dataSource2.push(e);else{var a=this.dataSource2.indexOf(e);a>=0&&this.dataSource2.splice(this.dataSource2.indexOf(e),1)}},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectionRows=t},onClearSelected:function(){this.selectedRowKeys=[],this.selectionRows=[]},handleDelete:function(e){this.dataSource2.splice(this.dataSource2.indexOf(e),1)},handleTableChange:function(e,t,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=e,this.loadData()}}},l=c,u=(a("a7261"),a("2877")),p=Object(u["a"])(l,n,r,!1,null,"55241771",null);t["default"]=p.exports},"0f9d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"100%"}},[a("a-select",{staticStyle:{width:"calc(100% - 178px)"},attrs:{mode:"multiple",placeholder:"Please select",value:e.nameList}}),a("span",{staticStyle:{display:"inline-block",width:"170px",float:"right",overflow:"hidden"}},[a("a-button",{staticStyle:{width:"81px"},attrs:{type:"primary",icon:"search"},on:{click:e.handleSelect}},[e._v("选择")]),a("a-button",{staticStyle:{"margin-left":"8px",width:"81px"},attrs:{type:"primary",icon:"reload"},on:{click:e.selectReset}},[e._v("清空")])],1),a("j-select-multi-user-modal",{ref:"selectModal",on:{selectFinished:e.selectOK}})],1)},r=[],s=a("06db"),i={name:"JSelectMultiUser",components:{JSelectMultiUserModal:s["default"]},props:{value:{type:String,required:!1}},data:function(){return{selectList:[]}},computed:{nameList:function(){for(var e=[],t=0;t<this.selectList.length;t++)e.push(this.selectList[t].username);var a="";return e.length>0&&(a=e.join(",")),this.$emit("change",a),e}},model:{prop:"value",event:"change"},methods:{handleSelect:function(){this.$refs.selectModal.add()},selectReset:function(){this.selectList=[]},selectOK:function(e){this.selectList=e}}},o=i,c=a("2877"),l=Object(c["a"])(o,n,r,!1,null,null,null);t["default"]=l.exports},"456d":function(e,t,a){var n=a("4bf8"),r=a("0d58");a("5eda")("keys",function(){return function(e){return r(n(e))}})},"4be9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{class:{abcdefg:!0},attrs:{bordered:!1}},[a("div",{staticClass:"no-print",staticStyle:{"text-align":"right"}},["print"==e.pageType?a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#printContent",expression:"'#printContent'"}],attrs:{ghost:"",type:"primary"},on:{click:e.handlePrint}},[e._v("打印")]):e._e(),"workflowing"==e.pageType||"notifying"==e.pageType?a("a-button",{staticStyle:{display:"none"},attrs:{ghost:"",type:"primary"},on:{click:e.handleSubmitWF}},[e._v("提交")]):e._e()],1),a("section",{ref:"print",staticClass:"abcdefg",attrs:{id:"printContent"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticStyle:{"font-size":"24px","font-weight":"800","margin-bottom":"35px","margin-top":"15px"}},[e._v(e._s(e.formName))])]),a("a-col",{attrs:{md:24,sm:24}},[a("div",{staticClass:"sign",staticStyle:{"text-align":"left",height:"inherit","margin-left":"35px"}},["undefined"!=typeof e.curRow.no&&null!=e.curRow.no?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.tableInfo.no)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.no)}})]):e._e(),"undefined"!=typeof e.curRow.file_name&&null!=e.curRow.file_name?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.curRow.fileNameTitle)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.file_name)}})]):e._e(),"undefined"!=typeof e.curRow.sigillum_name&&null!=e.curRow.sigillum_name?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.tableInfo.sigillum_name)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.sigillum_name)}})]):e._e(),a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.create_by)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.create_by,callback:function(t){e.$set(e.curRow,"create_by",t)},expression:"curRow.create_by"}})],1),a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[e._v(e._s(e.tableInfo.create_time)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.create_time,callback:function(t){e.$set(e.curRow,"create_time",t)},expression:"curRow.create_time"}})],1),a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.depart_name)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.depart.depart_name,callback:function(t){e.$set(e.depart,"depart_name",t)},expression:"depart.depart_name"}})],1),a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[e._v(e._s(e.curRow.formTypeName)+"类型:")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.leave_type_name,callback:function(t){e.$set(e.curRow,"leave_type_name",t)},expression:"curRow.leave_type_name"}})],1),"undefined"!=typeof e.tableInfo.employee_rank&&null!=e.tableInfo.employee_rank?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:24}},[a("a-col",{attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.employee_rank)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.employee_rank,callback:function(t){e.$set(e.curRow,"employee_rank",t)},expression:"curRow.employee_rank"}})],1)],1):e._e(),"undefined"!=typeof e.tableInfo.starttime&&null!=e.tableInfo.starttime?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.starttime)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.starttime,callback:function(t){e.$set(e.curRow,"starttime",t)},expression:"curRow.starttime"}})],1):e._e(),"undefined"!=typeof e.tableInfo.endtime&&null!=e.tableInfo.endtime?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[e._v(e._s(e.tableInfo.endtime)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.endtime,callback:function(t){e.$set(e.curRow,"endtime",t)},expression:"curRow.endtime"}})],1):e._e(),"undefined"!=typeof e.tableInfo.total_days&&null!=e.tableInfo.total_days?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.total_days)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.total_days,callback:function(t){e.$set(e.curRow,"total_days",t)},expression:"curRow.total_days"}})],1):e._e(),"undefined"!=typeof e.tableInfo.seal_copies&&null!=e.tableInfo.seal_copies?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.seal_copies)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.seal_copies,callback:function(t){e.$set(e.curRow,"seal_copies",t)},expression:"curRow.seal_copies"}})],1):e._e(),"undefined"!=typeof e.tableInfo.declare_type&&null!=e.tableInfo.declare_type?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.declare_type)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.declare_type,callback:function(t){e.$set(e.curRow,"declare_type",t)},expression:"curRow.declare_type"}})],1):e._e(),a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[e._v(e._s(e.tableInfo.bpm_status)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.bpm_status_name,callback:function(t){e.$set(e.curRow,"bpm_status_name",t)},expression:"curRow.bpm_status_name"}})],1),a("a-col",{attrs:{span:24}}),"undefined"!=typeof e.curRow.seal_name&&null!=e.curRow.seal_name?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.tableInfo.seal_name)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.seal_name)}})]):e._e(),a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.tableInfo.content)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.content)}})]),"undefined"!=typeof e.tableInfo.entourage&&null!=e.tableInfo.entourage?a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.tableInfo.entourage)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.entourage)}})]):e._e(),"undefined"!=typeof e.tableInfo.travel_address&&null!=e.tableInfo.travel_address?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.travel_address)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.travel_address,callback:function(t){e.$set(e.curRow,"travel_address",t)},expression:"curRow.travel_address"}})],1):e._e(),"undefined"!=typeof e.tableInfo.predict_fee&&null!=e.tableInfo.predict_fee?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.predict_fee)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.predict_fee,callback:function(t){e.$set(e.curRow,"predict_fee",t)},expression:"curRow.predict_fee"}})],1):e._e(),"undefined"!=typeof e.tableInfo.drive_type&&null!=e.tableInfo.drive_type?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.drive_type)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.drive_type,callback:function(t){e.$set(e.curRow,"drive_type",t)},expression:"curRow.drive_type"}})],1):e._e(),"undefined"!=typeof e.tableInfo.predict_mileage&&null!=e.tableInfo.predict_mileage?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.predict_mileage)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.predict_mileage,callback:function(t){e.$set(e.curRow,"predict_mileage",t)},expression:"curRow.predict_mileage"}})],1):e._e(),"undefined"!=typeof e.tableInfo.travel_transport&&null!=e.tableInfo.travel_transport?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[e._v(e._s(e.tableInfo.travel_transport)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:e.curRow.travel_transport,callback:function(t){e.$set(e.curRow,"travel_transport",t)},expression:"curRow.travel_transport"}})],1):e._e(),"undefined"!=typeof e.tableInfo.travel_remarks&&null!=e.tableInfo.travel_remarks?a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.tableInfo.travel_remarks)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.travel_remarks)}})]):e._e(),"undefined"!=typeof e.curRow.location&&null!=e.curRow.location?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[e._v(e._s(e.curRow.formTypeName)+"地址:")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:e._s(e.curRow.location)}})]):e._e(),1==e.curRow.main_table_status?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("a-table",{attrs:{columns:e.columns,dataSource:e.data,loading:e.loading,pagination:!1}})]],2):e._e(),null!=this.curRow&&1!=this.curRow.fileStatus&&"print"!=this.pageType&&this.curRow.fileType.includes("office")?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"98%"}},[a("a-divider",{staticStyle:{width:"98%"},attrs:{dashed:""}})],1)]):e._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType?a("a-col",{staticStyle:{"margin-top":"2px"},attrs:{span:24}},[[this.curRow.fileType.includes("office")?a("div",{class:[1!=this.curRow.fileStatus?"fileshow":"filenone"],staticStyle:{width:"100%",display:"block"}},[a("iframe",{directives:[{name:"print",rawName:"v-print",value:"#printContent",expression:"'#printContent'"}],staticClass:"no-print fileview-iframe",staticStyle:{display:"block",width:"88%",align:"left",height:"720px","overflow-y":"auto","overflow-x":"hidden",border:"1px solid #cecece","border-bottom":"1px solid #cecece"},attrs:{name:"fileviewFrame",id:"fileviewFrame",src:this.curRow.fileURL}})]):e._e()]],2):e._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType&&this.curRow.fileType.includes("image")?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"98%"}},[a("a-divider",{staticStyle:{width:"98%"},attrs:{dashed:""}},[e._v("·")])],1)]):e._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType?a("a-col",{staticStyle:{"margin-top":"2px"},attrs:{span:24}},[[this.curRow.fileType.includes("image")?a("div",{class:[1!=this.curRow.fileStatus?"fileshow":"filenone"],staticStyle:{"margin-botton":"0px"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("图片附件")]),a("vue-preview",{attrs:{slides:e.slides},on:{close:e.handleClose}})],1):e._e()]],2):e._e(),1!=e.curRow.bpm_status||e.workflows.length>0?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"98%"}},[a("a-divider",{staticStyle:{width:"98%"},attrs:{dashed:""}},[e._v("·")])],1)]):e._e(),(1!=e.curRow.bpm_status||e.workflows.length>0)&&"print"!=e.pageType?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{span:24}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("流程进度")]),[a("a-steps",{staticStyle:{width:"80%","margin-bottom":"10px"}},[a("a-step",{attrs:{status:e.wflowstatus.start.status,title:"发起"}},[a("a-icon",{attrs:{slot:"icon",type:"user"},slot:"icon"})],1),a("a-step",{attrs:{status:e.wflowstatus.audit.status,title:"审核"}},[a("a-icon",{attrs:{slot:"icon",type:"solution"},slot:"icon"})],1),a("a-step",{attrs:{status:e.wflowstatus.approve.status,title:"审批"}},[a("a-icon",{attrs:{slot:"icon",type:"audit"},slot:"icon"})],1),a("a-step",{attrs:{status:e.wflowstatus.message.status,title:"知会"}},[a("a-icon",{attrs:{slot:"icon",type:"mail"},slot:"icon"})],1)],1),a("br")],a("div",{staticStyle:{width:"98%","margin-top":"10px","margin-bottom":"10px"}},[a("a-divider",{staticStyle:{width:"98%"},attrs:{dashed:""}},[e._v("·")])],1)],2):e._e(),1!=e.curRow.bpm_status||e.workflows.length>0?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[e._v("审批流程")]),[a("a-timeline",e._l(e.workflows,function(t,n){return a("div",{key:n},[a("a-timeline-item",{attrs:{color:t.color}},["wait"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"clock-circle-o",theme:"twoTone",twoToneColor:"#eb2f2f",color:t.color},slot:"dot"}):e._e(),"start"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"tag",theme:"twoTone",twoToneColor:"#5599FF",color:t.color},slot:"dot"}):e._e(),"cancel"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"close-circle",theme:"twoTone",twoToneColor:"#ff0000",color:t.color},slot:"dot"}):e._e(),"agree"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"check-circle",theme:"twoTone",twoToneColor:"#52ce1a",color:t.color},slot:"dot"}):e._e(),"message"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"mail",theme:"twoTone",twoToneColor:t.color,color:t.color},slot:"dot"}):e._e(),"over"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"flag",theme:"twoTone",twoToneColor:t.color,color:t.color},slot:"dot"}):e._e(),"sound"==t.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"sound",theme:"twoTone",twoToneColor:"orange",color:t.color},slot:"dot"}):e._e(),e._v("\n                  "+e._s(t.content)+"\n                ")],1)],1)}),0)]],2):e._e(),"workflowing"==e.pageType&&1==e.curRow.bpm_status?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"审核用户"}},[a("j-select-multi-user",{model:{value:e.wflowUsers,callback:function(t){e.wflowUsers=t},expression:"wflowUsers"}})],1),a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"审批用户"}},[a("j-select-multi-user",{model:{value:e.approveUser,callback:function(t){e.approveUser=t},expression:"approveUser"}})],1),a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"知会用户"}},[a("j-select-multi-user",{model:{value:e.notifyUsers,callback:function(t){e.notifyUsers=t},expression:"notifyUsers"}})],1)],1)],[a("div",{staticStyle:{width:"88%","margin-top":"10px"}},["workflowing"==e.pageType||"notifying"==e.pageType?a("a-button",{attrs:{ghost:"",type:"primary"},on:{click:e.handleSubmitWF}},[e._v("提交")]):e._e()],1)]],2):e._e(),"notifying"==e.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"知会用户"}},[a("j-select-multi-user",{model:{value:e.notifyUsers,callback:function(t){e.notifyUsers=t},expression:"notifyUsers"}})],1)],1)],[a("div",{staticStyle:{width:"88%","margin-top":"10px"}},["workflowing"==e.pageType||"notifying"==e.pageType?a("a-button",{attrs:{ghost:"",type:"primary"},on:{click:e.handleSubmitWF}},[e._v("提交")]):e._e()],1)]],2):e._e(),"workflow"==e.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("div",{staticStyle:{width:"88%"}},[a("a-textarea",{staticStyle:{align:"left","text-align":"left"},attrs:{placeholder:"请输入审批意见",autosize:{minRows:2,maxRows:10}},model:{value:e.curRow.idea_content,callback:function(t){e.$set(e.curRow,"idea_content",t)},expression:"curRow.idea_content"}})],1),a("div",{staticStyle:{width:"88%","margin-top":"10px"}},[a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#2090fe",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:e.handleApproveWF}},[e._v("同意")]),a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#fe5050",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:e.handleRejectWF}},[e._v("驳回")])],1)]],2):e._e(),"notify"==e.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("div",{staticStyle:{width:"88%"}},[a("a-textarea",{staticStyle:{align:"left","text-align":"left"},attrs:{placeholder:"请输入知会意见",autosize:{minRows:2,maxRows:10}},model:{value:e.curRow.idea_content,callback:function(t){e.$set(e.curRow,"idea_content",t)},expression:"curRow.idea_content"}})],1),a("div",{staticStyle:{width:"88%","margin-top":"10px"}},[a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#2090fe",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:e.handleConfirmWF}},[e._v("确认")])],1)]],2):e._e(),a("a-modal",{attrs:{title:"温馨提示",visible:e.tipVisible,confirmLoading:e.tipConfirmLoading},on:{ok:e.tipHandleOk,cancel:e.tipHandleCancel}},[a("p",[e._v(e._s(e.tipContent))])])],1)])],1)])},r=[],s=(a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),i=a("0fea"),o=a("5d2d"),c=a("ca00"),l=a("17fb"),u=a("da05"),p=a("290c"),d=a("261e"),m=a("0f9d"),f=[],b={components:{ATextarea:d["a"],ARow:p["a"],ACol:u["b"],JSelectMultiUser:m["default"]},name:"Printgzsld",props:{reBizCode:{type:String,default:""}},data:function(){return{columns:[],data:[],loading:!1,labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:8}},formName:"流程申请单",curRow:{},depart:{},fileinfo:"",workflows:[],pageType:"view",tableName:"",wflowUsers:"",notifyUsers:"",approveUser:"",tableInfo:"",tipVisible:!1,tipContent:"",slides:f,wflowstatus:{},form:this.$form.createForm(this)}},created:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["L"](this);case 2:return t=e.sent,e.next=5,i["a"](t,this);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),watch:{$route:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["L"](this);case 2:return t=e.sent,e.next=5,i["a"](t,this);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},methods:{loadData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["L"](this);case 2:return t=e.sent,e.next=5,i["a"](t,this);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getDate:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),tipHandleOk:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.tipConfirmLoading=!0,setTimeout(function(){t.loadData(),t.tipVisible=!1,t.tipConfirmLoading=!1},300);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),tipHandleCancel:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.loadData(),this.tipVisible=!1;case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getFormFieldValue:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.form.getFieldValue(t));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handlePrint:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.curRow.fileStatus=1,setTimeout(function(){t.curRow.fileStatus=0},1e4);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleApproveWF:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("是否确认提交此自由流程?","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function e(){var a,n,r,s,u,p,d,m,f,b,_,y,w,h,g,x,v,S,R,k,T,I,O,C,$,F,j,M,D,L,U,P,z;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t,r=o["a"]("cur_user"),s=c["d"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),u=u||"同意",p=p||t.curRow.idea_content||"同意",d=a.curRow,m=c["g"]("processLogID"),f=c["g"]("table_name"),b=null,_=[],y=null,w=null,h=null,g=null,e.prev=14,e.next=17,i["w"](f,m);case 17:d=e.sent,e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](14);case 23:if(""!=c["b"](d)){e.next=26;break}return a.$message.warning("未找到下一节点的流程信息，请刷新页面，查看是否已经审批完成！"),e.abrupt("return",!1);case 26:if(y=d["business_data_id"],w=d["process_audit"],c["b"](d["employee"]).includes(r["username"])||c["b"](d["employee"]).includes(r["realname"])){e.next=31;break}return a.$message.warning("您不在此审批流程记录的操作职员列中，无法进行审批操作！"),e.abrupt("return",!1);case 31:return e.prev=31,e.next=34,i["v"](f,y);case 34:_=e.sent,e.next=40;break;case 37:e.prev=37,e.t1=e["catch"](31);case 40:return l["each"](_,function(e){var t=e["create_time"];e["approve_user"]=r["username"],e["action"]=u,e["operate_time"]=s,e["action_opinion"]=p,e["create_time"]=c["d"](t,"yyyy-MM-dd hh:mm:ss")}),h=JSON.parse(JSON.stringify(_)),e.next=44,i["s"](f);case 44:if(g=e.sent,a.fixedWFlow=g[0],a.rights=g,!(g.length>1&&"000000000"!=d.business_code)){e.next=53;break}return a.tipVisible=!0,a.tipContent="获取到此业务含有多个流程权责，请联系管理员进行配置！",e.abrupt("return",!1);case 53:if(!(g.length<=0&&"000000000"!=d.business_code)){e.next=59;break}return a.tipVisible=!0,a.tipContent="未获取到此业务的流程权责，无法同意审批！",e.abrupt("return",!1);case 59:if(x="",v="",S=w,R=""==c["b"](v)?"":v.split(","),"000000000"==d.business_code){e.next=78;break}e.prev=64,x=","+a.fixedWFlow["audit"]+","+a.fixedWFlow["approve"]+",",v=a.fixedWFlow["notify"],b=a.fixedWFlow["approve"],e.next=76;break;case 70:return e.prev=70,e.t2=e["catch"](64),a.tipVisible=!0,a.tipContent="固化流程设置节点失败，无法进行审批操作！",e.abrupt("return",!1);case 76:e.next=93;break;case 78:e.prev=78,k=JSON.parse(d.business_data),"audit_node"in k||"approve_node"in k||"notify_node"in k||(k=JSON.parse(k.business_data)),x=","+c["b"](k.audit_node)+","+c["b"](k.approve_node)+",",R=""==c["b"](k.notify_node)?[]:[k.notify_node],b=k.approve_node,S=d["employee"],e.next=93;break;case 87:return e.prev=87,e.t3=e["catch"](78),a.tipVisible=!0,a.tipContent="自由流程设置节点失败，无法进行审批操作！",e.abrupt("return",!1);case 93:if(T=x.split(","+S+","),I=T[1],O={},""!=I){e.next=145;break}O={bpm_status:"4"},C=!0,$=!1,F=void 0,e.prev=101,j=R[Symbol.iterator]();case 103:if(C=(M=j.next()).done){e.next=119;break}return D=M.value,e.next=107,i["D"](D);case 107:return L=e.sent,e.next=110,i["E"](D);case 110:return U=e.sent,P={},P="000000000"!=d.business_code?{id:i["F"](32),table_name:f,main_value:d["main_value"],business_data_id:d["business_data_id"],business_code:a.fixedWFlow["id"],process_name:a.fixedWFlow["items"],employee:L[0]["employee"],process_station:U[0]["item_text"],process_audit:D,operate_time:s,create_time:s,proponents:d["proponents"],content:d["content"],business_data:JSON.stringify(d)}:{id:i["F"](32),table_name:f,main_value:d["business_data_id"],business_data_id:d["business_data_id"],business_code:"000000001",process_name:"自由流程知会",employee:D,process_station:"自由流程知会",process_audit:"000000001",proponents:d["proponents"],content:d["content"],operate_time:s,create_time:s,business_data:d.business_data},e.next=115,i["p"](P);case 115:n=e.sent;case 116:C=!0,e.next=103;break;case 119:e.next=125;break;case 121:e.prev=121,e.t4=e["catch"](101),$=!0,F=e.t4;case 125:e.prev=125,e.prev=126,C||null==j.return||j.return();case 128:if(e.prev=128,!$){e.next=131;break}throw F;case 131:return e.finish(128);case 132:return e.finish(125);case 133:return e.next=135,i["o"](h);case 135:return n=e.sent,e.next=138,i["c"](f,h);case 138:return n=e.sent,e.next=141,i["k"](f,d["business_data_id"],O);case 141:n=e.sent,a.tipContent="同意审批成功，审批流程处理完毕！",e.next=180;break;case 145:if(I=0==I.indexOf(",")?I.substring(1):I,I=I.split(",")[0],O=b==I?{bpm_status:"3"}:{bpm_status:"2"},P={},"000000000"==d.business_code){e.next=159;break}return e.next=152,i["D"](I);case 152:return L=e.sent,e.next=155,i["E"](I);case 155:U=e.sent,P={id:i["F"](32),table_name:f,main_value:d["main_value"],business_data_id:d["business_data_id"],business_code:a.fixedWFlow["id"],process_name:a.fixedWFlow["items"],employee:L[0]["employee"],process_station:U[0]["item_text"],process_audit:I,proponents:d["proponents"],content:d["content"],create_time:s,business_data:d.business_data},e.next=160;break;case 159:P={id:i["F"](32),table_name:f,main_value:d["business_data_id"],business_data_id:d["business_data_id"],business_code:"000000000",process_name:"自由流程审批",employee:I,process_station:"自由流程审批",process_audit:"000000000",proponents:d["proponents"],content:d["content"],operate_time:s,create_time:s,business_data:d.business_data};case 160:return e.next=162,i["r"](f,d["business_data_id"]);case 162:if(z=e.sent,!z){e.next=167;break}a.tipContent="处理异常，请稍后重试；如果多次处理异常，可能需要撤销当前审批，重新发起审批流程！",e.next=180;break;case 167:return e.next=169,i["n"](P);case 169:return n=e.sent,e.next=172,i["o"](h);case 172:return n=e.sent,e.next=175,i["c"](f,h);case 175:return n=e.sent,e.next=178,i["k"](f,d["business_data_id"],O);case 178:n=e.sent,a.tipContent="同意审批成功，审批流程已推向后续处理人！";case 180:return a.tipVisible=!0,t.loadData(),t.pageType="view",e.abrupt("return",n);case 184:case"end":return e.stop()}},e,null,[[14,20],[31,37],[64,70],[78,87],[101,121,125,133],[126,,128,132]])}))).catch(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 2:case"end":return e.stop()}},e)})));case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleRejectWF:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("是否进行驳回审批操作?","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function e(){var a,n,r,s,u,p,d,m,f,b,_;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t,r=o["a"]("cur_user"),s=c["d"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),u=u||"驳回",p=p||a.curRow.idea_content||"驳回",d=a.curRow,m=c["g"]("processLogID"),f=d["table_name"]||c["g"]("table_name"),b={bpm_status:"1"},e.next=11,i["w"](f,m);case 11:if(d=e.sent,c["b"](d["employee"]).includes(r["username"])||c["b"](d["employee"]).includes(r["realname"])){e.next=15;break}return a.$message.warning("您不在此审批流程记录的操作职员列中，无法进行驳回操作！"),e.abrupt("return",!1);case 15:return e.next=17,i["w"](f,d["id"]);case 17:return d=e.sent,e.next=20,i["v"](f,d["business_data_id"]);case 20:return _=e.sent,l["each"](_,function(e){var t=e["create_time"];e["approve_user"]=r["username"],e["action"]=u,e["operate_time"]=s,e["action_opinion"]=p,e["create_time"]=c["d"](t,"yyyy-MM-dd hh:mm:ss")}),e.next=24,i["o"](_);case 24:return n=e.sent,e.next=27,i["c"](f,_);case 27:return n=e.sent,e.next=30,i["k"](f,d["business_data_id"],b);case 30:return n=e.sent,a.tipVisible=!0,a.tipContent="驳回审批成功！",t.pageType="view",t.loadData(),e.abrupt("return",n);case 36:case"end":return e.stop()}},e)}))).catch(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 2:case"end":return e.stop()}},e)})));case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleConfirmWF:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("是否进行确认知会操作?","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function e(){var a,n,r,s,l,u,p,d,m,f,b,_;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t,r=o["a"]("cur_user"),s=c["d"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),l=l||"知会",u=u||a.curRow.idea_content||"知会确认",p=a.curRow,d=c["g"]("processLogID"),m=c["g"]("table_name"),f={bpm_status:"5"},e.next=11,i["A"](m,d);case 11:if(p=e.sent,p["create_time"]=s,!(c["b"](p["approve_user"]).length>=c["b"](p["employee"]).length)){e.next=32;break}return e.prev=14,e.next=17,i["o"](p);case 17:return n=e.sent,e.next=20,i["d"](m,[p]);case 20:return n=e.sent,e.next=23,i["k"](m,p["business_data_id"],f);case 23:n=e.sent,e.next=29;break;case 26:e.prev=26,e.t0=e["catch"](14);case 29:return a.tipVisible=!0,a.tipContent="知会确认成功！",e.abrupt("return",!0);case 32:if(b=","+c["b"](p["employee"])+",",_=","+c["b"](p["approve_user"])+",",c["b"](b).includes(","+r["username"]+",")||c["b"](b).includes(","+r["realname"]+",")){e.next=37;break}return a.$message.warning("您不在此知会记录的操作职员列中，无法进行确认操作！"),e.abrupt("return",!1);case 37:if(!c["b"](_).includes(","+r["username"]+",")&&!c["b"](_).includes(","+r["realname"]+",")){e.next=40;break}return a.$message.warning("您已经在此知会记录中，执行过确认操作了！"),e.abrupt("return",!1);case 40:return p["approve_user"]=c["b"](p["approve_user"])+(""==c["b"](p["approve_user"])?"":",")+r["username"],p["action"]=l,p["operate_time"]=s,p["action_opinion"]=c["b"](p["action_opinion"])+(""==c["b"](p["action_opinion"])?"":"\n\r")+"".concat(r["username"],":").concat(u),e.next=46,i["k"]("PR_LOG_INFORMED",p["id"],p);case 46:if(!(p["approve_user"].length>=p["employee"].length)){e.next=62;break}return e.prev=47,e.next=50,i["o"](p);case 50:return n=e.sent,e.next=53,i["d"](m,[p]);case 53:return n=e.sent,e.next=56,i["k"](m,p["business_data_id"],f);case 56:n=e.sent,e.next=62;break;case 59:e.prev=59,e.t1=e["catch"](47);case 62:return a.tipVisible=!0,a.tipContent="知会确认成功！",t.pageType="view",t.loadData(),e.abrupt("return",n);case 67:case"end":return e.stop()}},e,null,[[14,26],[47,59]])}))).catch(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 2:case"end":return e.stop()}},e)})));case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleSubmitWF:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("是否确认提交此自由流程?","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function e(){var a,n,r,s,l,u,p,d,m,f,b,_,y;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=o["a"]("cur_user"),n=t.wflowUsers,r=t.notifyUsers,s=t.approveUser,l=c["d"](new Date,"yyyy-MM-dd hh:mm:ss"),""!=c["b"](s)||"workflowing"!=t.pageType){e.next=8;break}return t.$confirm_({title:"温馨提示",content:"请选择审批用户!"}),e.abrupt("return",!1);case 8:if(!c["b"](s).includes(",")||"workflowing"!=t.pageType){e.next=11;break}return t.$confirm_({title:"温馨提示",content:"审批用户只能选择一个!"}),e.abrupt("return",!1);case 11:if(""!=c["b"](r)||"notifying"!=t.pageType){e.next=14;break}return t.$confirm_({title:"温馨提示",content:"请选择知会用户!"}),e.abrupt("return",!1);case 14:if(u=c["g"]("table_name"),p={id:i["F"](32),create_by:a["username"],create_time:l,table_name:u,main_key:c["g"]("id"),audit_node:c["b"](n),approve_node:c["b"](s),notify_node:c["b"](r)},""==c["b"](s)||"workflowing"!=t.pageType){e.next=50;break}return e.next=19,i["m"](p);case 19:return e.sent,d=JSON.parse(JSON.stringify(p)),p={id:i["F"](32),table_name:u,main_value:c["g"]("id"),business_data_id:c["g"]("id"),business_code:"000000000",process_name:"自由流程审批",employee:a["username"],process_station:"自由流程审批",process_audit:"000000000",proponents:a["username"],approve_user:a["username"],action:"发起",action_opinion:"发起自由流程",content:t.curRow["content"],operate_time:l,create_time:l,business_data:JSON.stringify(d)},e.next=24,i["o"](p);case 24:return e.sent,m=""==c["b"](n)?c["b"](s):c["b"](n).split(",")[0],p={id:i["F"](32),table_name:u,main_value:c["g"]("id"),business_data_id:c["g"]("id"),business_code:"000000000",process_name:"自由流程审批",employee:m,process_station:"自由流程审批",process_audit:"000000000",proponents:a["username"],content:t.curRow["content"],operate_time:l,create_time:l,business_data:JSON.stringify(p)},e.next=29,i["r"](u,t.curRow["id"]);case 29:if(f=e.sent,!f){e.next=36;break}return t.$confirm_({title:"温馨提示",content:"待审记录中，已经存在此记录，无法再次提交审批！"}),t.loadData(),e.abrupt("return",!0);case 36:return e.next=38,i["n"](p);case 38:return e.sent,e.next=42,i["k"](u,t.curRow["id"],{bpm_status:"2"});case 42:return e.sent,e.next=45,i["k"](u,t.curRow["id"],{bpm_status:"2"});case 45:return e.sent,t.$confirm("提交自由流程审批成功！","操作成功",{type:"success"}),t.pageType="view",t.loadData(),e.abrupt("return",!0);case 50:if(""==c["b"](r)||"notifying"!=t.pageType){e.next=74;break}return e.next=53,i["G"](u,c["g"]("id"));case 53:return b=e.sent,e.next=56,i["u"](c["g"]("id"));case 56:if(_=e.sent,4==b["bpm_status"]||5==b["bpm_status"]){e.next=60;break}return t.$confirm_({title:"温馨提示",content:"此表单业务尚未审批通过，无法进行知会操作！"}),e.abrupt("return",!0);case 60:if(!(""!=c["b"](_)&&_.today>=3)){e.next=63;break}return t.$confirm_({title:"温馨提示",content:"同一业务数据，每天最多知会3次！"}),e.abrupt("return",!0);case 63:if(!(""!=c["b"](_)&&_.total>=10)){e.next=66;break}return t.$confirm_({title:"温馨提示",content:"同一业务数据，总计最多知会10次！"}),e.abrupt("return",!0);case 66:return y={id:i["F"](32),table_name:u,main_value:c["g"]("id"),business_data_id:c["g"]("id"),business_code:"000000001",process_name:"自由流程知会",employee:c["b"](r),process_station:"自由流程知会",process_audit:"000000001",operate_time:l,create_time:l,proponents:a["username"],content:t.curRow["content"],business_data:JSON.stringify(t.curRow)},e.next=69,i["p"](y);case 69:return e.sent,t.$confirm("知会操作成功！","操作成功",{type:"success"}),t.pageType="view",t.loadData(),e.abrupt("return",!0);case 74:case"end":return e.stop()}},e)}))).catch(Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 2:case"end":return e.stop()}},e)})));case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},_=b,y=(a("6f8b"),a("2877")),w=Object(y["a"])(_,n,r,!1,null,"327d462a",null);t["default"]=w.exports},"5eda":function(e,t,a){var n=a("5ca1"),r=a("8378"),s=a("79e5");e.exports=function(e,t){var a=(r.Object||{})[e]||Object[e],i={};i[e]=t(a),n(n.S+n.F*s(function(){a(1)}),"Object",i)}},"6f8b":function(e,t,a){"use strict";var n=a("af0d"),r=a.n(n);r.a},"96e8":function(e,t,a){},a7261:function(e,t,a){"use strict";var n=a("96e8"),r=a.n(n);r.a},af0d:function(e,t,a){}}]);