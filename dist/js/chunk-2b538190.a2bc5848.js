(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b538190"],{"06db":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{centered:"",title:t.title,width:1200,visible:t.visible,cancelText:"关闭"},on:{ok:t.handleOk,cancel:t.handleCancel}},[a("a-row",{attrs:{gutter:18}},[a("a-col",{attrs:{span:16}},[a("a-card",{attrs:{title:"选择人员",bordered:!0}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:10}},[a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.queryParam.name,callback:function(e){t.$set(t.queryParam,"name",e)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{span:8}},[a("span",{staticClass:"table-page-search-submitButtons",staticStyle:{float:"left",overflow:"hidden"}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.searchQuery}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary",icon:"reload"},on:{click:t.searchReset}},[t._v("重置")])],1)])],1)],1)],1),a("div",[a("a-table",{attrs:{size:"small",bordered:"",rowKey:"id",columns:t.columns1,dataSource:t.dataSource1,pagination:t.ipagination,loading:t.loading,scroll:{y:240},rowSelection:{selectedRowKeys:t.selectedRowKeys,onSelectAll:t.onSelectAll,onSelect:t.onSelect,onChange:t.onSelectChange}},on:{change:t.handleTableChange}})],1)])],1),a("a-col",{attrs:{span:8}},[a("a-card",{attrs:{title:"用户选择",bordered:!0}},[a("div",[a("a-table",{attrs:{size:"small",bordered:"",rowKey:"id",columns:t.columns2,dataSource:t.dataSource2,loading:t.loading,scroll:{y:240}},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a-button",{attrs:{type:"primary",size:"small",icon:"delete"},on:{click:function(e){return t.handleDelete(n)}}},[t._v("删除")])],1)}}])})],1)])],1)],1)],1)},r=[],i=(a("ac6a"),a("456d"),a("96cf"),a("3b8d")),o=a("ca00"),s=a("0fea"),c={name:"JSelectMultiUserModal",data:function(){return{title:"用户列表",names:[],visible:!1,placement:"right",description:"人员管理页面",queryParam:{},columns1:[{title:"用户代码",align:"center",width:100,dataIndex:"username"},{title:"用户名称",align:"center",width:100,dataIndex:"realname"},{title:"邮箱",align:"center",width:180,dataIndex:"email"}],columns2:[{title:"用户账号",align:"center",width:100,dataIndex:"username"},{title:"操作",dataIndex:"action",align:"center",width:100,scopedSlots:{customRender:"action"}}],dataSource1:[],dataSource2:[],ipagination:{current:1,pageSize:30,pageSizeOptions:["30","50","80"],showTotal:function(t,e){return e[0]+"-"+e[1]+" 共"+t+"条"},showQuickJumper:!0,showSizeChanger:!0,total:0},isorter:{column:"username",order:"desc"},loading:!1,selectedRowKeys:[],selectedRows:[]}},created:function(){this.loadData()},methods:{searchQuery:function(){this.loadData(1)},searchReset:function(){this.queryParam={},this.loadData(1)},handleCancel:function(){this.visible=!1},handleOk:function(){this.$emit("selectFinished",this.dataSource2),this.visible=!1},add:function(){this.visible=!0},loadData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return 1===e&&(this.ipagination.current=1),a=this.getQueryParams(),t.next=4,Object(s["T"])(a);case 4:n=t.sent,this.dataSource1=n.records,this.ipagination.total=n.total;case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getQueryParams:function(){var t=Object.assign({},this.queryParam,this.isorter);return t.field=this.getQueryField(),t.pageNo=this.ipagination.current,t.pageSize=this.ipagination.pageSize,Object(o["c"])(t)},getQueryField:function(){},onSelectAll:function(t,e,a){if(!0===t)for(var n=0;n<a.length;n++)this.dataSource2.push(a[n]);else for(var r=0;r<a.length;r++)this.dataSource2.splice(this.dataSource2.indexOf(a[r]),1)},onSelect:function(t,e){if(!0===e)this.dataSource2.push(t);else{var a=this.dataSource2.indexOf(t);a>=0&&this.dataSource2.splice(this.dataSource2.indexOf(t),1)}},onSelectChange:function(t,e){this.selectedRowKeys=t,this.selectionRows=e},onClearSelected:function(){this.selectedRowKeys=[],this.selectionRows=[]},handleDelete:function(t){this.dataSource2.splice(this.dataSource2.indexOf(t),1)},handleTableChange:function(t,e,a){Object.keys(a).length>0&&(this.isorter.column=a.field,this.isorter.order="ascend"==a.order?"asc":"desc"),this.ipagination=t,this.loadData()}}},l=c,u=(a("0f0f1"),a("2877")),p=Object(u["a"])(l,n,r,!1,null,"63ebad2b",null);e["default"]=p.exports},"0f0f1":function(t,e,a){"use strict";var n=a("cf37"),r=a.n(n);r.a},"0f9d":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%"}},[a("a-select",{staticStyle:{width:"calc(100% - 178px)"},attrs:{mode:"multiple",placeholder:"Please select",value:t.nameList}}),a("span",{staticStyle:{display:"inline-block",width:"170px",float:"right",overflow:"hidden"}},[a("a-button",{staticStyle:{width:"81px"},attrs:{type:"primary",icon:"search"},on:{click:t.handleSelect}},[t._v("选择")]),a("a-button",{staticStyle:{"margin-left":"8px",width:"81px"},attrs:{type:"primary",icon:"reload"},on:{click:t.selectReset}},[t._v("清空")])],1),a("j-select-multi-user-modal",{ref:"selectModal",on:{selectFinished:t.selectOK}})],1)},r=[],i=a("06db"),o={name:"JSelectMultiUser",components:{JSelectMultiUserModal:i["default"]},props:{value:{type:String,required:!1}},data:function(){return{selectList:[]}},computed:{nameList:function(){for(var t=[],e=0;e<this.selectList.length;e++)t.push(this.selectList[e].username);var a="";return t.length>0&&(a=t.join(",")),this.$emit("change",a),t}},model:{prop:"value",event:"change"},methods:{handleSelect:function(){this.$refs.selectModal.add()},selectReset:function(){this.selectList=[]},selectOK:function(t){this.selectList=t}}},s=o,c=a("2877"),l=Object(c["a"])(s,n,r,!1,null,null,null);e["default"]=l.exports},"3c37":function(t,e,a){},"4be9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{class:{abcdefg:!0},attrs:{bordered:!1}},[a("div",{staticClass:"no-print",staticStyle:{"text-align":"right"}},[a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#printContent",expression:"'#printContent'"}],attrs:{ghost:"",type:"primary"},on:{click:t.handlePrint}},[t._v("打印")]),a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#printContent",expression:"'#printContent'"}],attrs:{ghost:"",type:"primary"},on:{click:t.handleQRcode}},[t._v("二维码")]),a("a-button",{directives:[{name:"print",rawName:"v-print",value:"#printContent",expression:"'#printContent'"}],attrs:{ghost:"",type:"primary"},on:{click:t.handleShortURL}},[t._v("短链接")])],1),a("section",{ref:"print",staticClass:"abcdefg",attrs:{id:"printContent"}},[a("div",{staticStyle:{"text-align":"center"}},[a("p",{staticStyle:{"font-size":"24px","font-weight":"800","margin-bottom":"35px","margin-top":"15px"}},[t._v(t._s(t.formName))])]),a("a-col",{attrs:{md:24,sm:24}},[a("div",{staticClass:"sign",staticStyle:{"text-align":"left",height:"inherit","margin-left":"35px"}},["undefined"!=typeof t.curRow.no&&null!=t.curRow.no?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.no)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.no)}})]):t._e(),"undefined"!=typeof t.curRow.file_name&&null!=t.curRow.file_name?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.curRow.fileNameTitle)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.file_name)}})]):t._e(),"undefined"!=typeof t.curRow.sigillum_name&&null!=t.curRow.sigillum_name?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.sigillum_name)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.sigillum_name)}})]):t._e(),a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.create_by)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.create_by,callback:function(e){t.$set(t.curRow,"create_by",e)},expression:"curRow.create_by"}})],1),a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[t._v(t._s(t.tableInfo.create_time)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.create_time,callback:function(e){t.$set(t.curRow,"create_time",e)},expression:"curRow.create_time"}})],1),"undefined"!=typeof t.curRow.depart_name&&null!=t.curRow.depart_name?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.depart_name)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.depart_name,callback:function(e){t.$set(t.curRow,"depart_name",e)},expression:"curRow.depart_name"}})],1):t._e(),"undefined"!=typeof t.curRow.leave_type_name&&null!=t.curRow.leave_type_name?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[t._v(t._s(t.curRow.formTypeName)+"类型:")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.leave_type_name,callback:function(e){t.$set(t.curRow,"leave_type_name",e)},expression:"curRow.leave_type_name"}})],1):t._e(),"undefined"!=typeof t.curRow.announce_type&&null!=t.curRow.announce_type?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[t._v(t._s(t.tableInfo.announce_type)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.announce_type,callback:function(e){t.$set(t.curRow,"announce_type",e)},expression:"curRow.announce_type"}})],1):t._e(),"undefined"!=typeof t.curRow.announce_title&&null!=t.curRow.announce_title?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[t._v(t._s(t.tableInfo.announce_title)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.announce_title,callback:function(e){t.$set(t.curRow,"announce_title",e)},expression:"curRow.announce_title"}})],1):t._e(),"undefined"!=typeof t.tableInfo.employee_rank&&null!=t.tableInfo.employee_rank?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:24}},[a("a-col",{attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.employee_rank)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.employee_rank,callback:function(e){t.$set(t.curRow,"employee_rank",e)},expression:"curRow.employee_rank"}})],1)],1):t._e(),"undefined"!=typeof t.tableInfo.starttime&&null!=t.tableInfo.starttime?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.starttime)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.starttime,callback:function(e){t.$set(t.curRow,"starttime",e)},expression:"curRow.starttime"}})],1):t._e(),"undefined"!=typeof t.tableInfo.endtime&&null!=t.tableInfo.endtime?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[t._v(t._s(t.tableInfo.endtime)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.endtime,callback:function(e){t.$set(t.curRow,"endtime",e)},expression:"curRow.endtime"}})],1):t._e(),"undefined"!=typeof t.tableInfo.total_days&&null!=t.tableInfo.total_days?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.total_days)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.total_days,callback:function(e){t.$set(t.curRow,"total_days",e)},expression:"curRow.total_days"}})],1):t._e(),"undefined"!=typeof t.tableInfo.seal_copies&&null!=t.tableInfo.seal_copies?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.seal_copies)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.seal_copies,callback:function(e){t.$set(t.curRow,"seal_copies",e)},expression:"curRow.seal_copies"}})],1):t._e(),"undefined"!=typeof t.tableInfo.declare_type&&null!=t.tableInfo.declare_type?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.declare_type)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.declare_type,callback:function(e){t.$set(t.curRow,"declare_type",e)},expression:"curRow.declare_type"}})],1):t._e(),a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"0%"}},[t._v(t._s(t.tableInfo.bpm_status)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.bpm_status_name,callback:function(e){t.$set(t.curRow,"bpm_status_name",e)},expression:"curRow.bpm_status_name"}})],1),a("a-col",{attrs:{span:24}}),"undefined"!=typeof t.curRow.seal_name&&null!=t.curRow.seal_name?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.seal_name)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.seal_name)}})]):t._e(),"undefined"!=typeof t.tableInfo.employee_post&&null!=t.tableInfo.employee_post&&"undefined"!=typeof t.curRow.employee_post&&null!=t.curRow.employee_post?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"28px"}},[t._v(t._s(t.tableInfo.employee_post)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.employee_post,callback:function(e){t.$set(t.curRow,"employee_post",e)},expression:"curRow.employee_post"}})],1):t._e(),"undefined"!=typeof t.tableInfo.traffic_models&&null!=t.tableInfo.traffic_models&&"undefined"!=typeof t.curRow.traffic_models&&null!=t.curRow.traffic_models?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"28px"}},[t._v(t._s(t.tableInfo.traffic_models)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.traffic_models,callback:function(e){t.$set(t.curRow,"traffic_models",e)},expression:"curRow.traffic_models"}})],1):t._e(),"undefined"!=typeof t.tableInfo.licence_number&&null!=t.tableInfo.licence_number&&"undefined"!=typeof t.curRow.licence_number&&null!=t.curRow.licence_number?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"14px"}},[t._v(t._s(t.tableInfo.licence_number)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.licence_number,callback:function(e){t.$set(t.curRow,"licence_number",e)},expression:"curRow.licence_number"}})],1):t._e(),"undefined"!=typeof t.tableInfo.traffic_amount&&null!=t.tableInfo.traffic_amount&&"undefined"!=typeof t.curRow.traffic_amount&&null!=t.curRow.traffic_amount?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{"margin-left":"28px"}},[t._v(t._s(t.tableInfo.traffic_amount.padStart(4," "))+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.traffic_amount,callback:function(e){t.$set(t.curRow,"traffic_amount",e)},expression:"curRow.traffic_amount"}})],1):t._e(),"undefined"!=typeof t.curRow.content&&null!=t.curRow.content?a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.content)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.content)}})]):t._e(),"undefined"!=typeof t.tableInfo.entourage&&null!=t.tableInfo.entourage&&"undefined"!=typeof t.curRow.entourage&&null!=t.curRow.entourage?a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.entourage)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.entourage)}})]):t._e(),"undefined"!=typeof t.tableInfo.travel_address&&null!=t.tableInfo.travel_address?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.travel_address)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.travel_address,callback:function(e){t.$set(t.curRow,"travel_address",e)},expression:"curRow.travel_address"}})],1):t._e(),"undefined"!=typeof t.tableInfo.predict_fee&&null!=t.tableInfo.predict_fee?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.predict_fee)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.predict_fee,callback:function(e){t.$set(t.curRow,"predict_fee",e)},expression:"curRow.predict_fee"}})],1):t._e(),"undefined"!=typeof t.tableInfo.drive_type&&null!=t.tableInfo.drive_type?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.drive_type)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.drive_type,callback:function(e){t.$set(t.curRow,"drive_type",e)},expression:"curRow.drive_type"}})],1):t._e(),"undefined"!=typeof t.tableInfo.predict_mileage&&null!=t.tableInfo.predict_mileage?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.predict_mileage)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.predict_mileage,callback:function(e){t.$set(t.curRow,"predict_mileage",e)},expression:"curRow.predict_mileage"}})],1):t._e(),"undefined"!=typeof t.tableInfo.travel_transport&&null!=t.tableInfo.travel_transport?a("a-col",{staticStyle:{"margin-bottom":"10px"},attrs:{span:12}},[a("span",[t._v(t._s(t.tableInfo.travel_transport)+":")]),a("a-input",{staticStyle:{width:"70%"},attrs:{readonly:""},model:{value:t.curRow.travel_transport,callback:function(e){t.$set(t.curRow,"travel_transport",e)},expression:"curRow.travel_transport"}})],1):t._e(),"undefined"!=typeof t.tableInfo.traffic_standards&&null!=t.tableInfo.traffic_standards&&"undefined"!=typeof t.curRow.traffic_standards&&null!=t.curRow.traffic_standards?a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.traffic_standards)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.traffic_standards)}})]):t._e(),"undefined"!=typeof t.tableInfo.traffic_numbers&&null!=t.tableInfo.traffic_numbers&&"undefined"!=typeof t.curRow.traffic_numbers&&null!=t.curRow.traffic_numbers?a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.traffic_numbers)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.traffic_numbers)}})]):t._e(),"undefined"!=typeof t.tableInfo.travel_remarks&&null!=t.tableInfo.travel_remarks?a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.travel_remarks)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.travel_remarks)}})]):t._e(),"undefined"!=typeof t.curRow.location&&null!=t.curRow.location?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.curRow.formTypeName)+"地址:")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.location)}})]):t._e(),"undefined"!=typeof t.curRow.announce_content&&null!=t.curRow.announce_content?a("a-col",{staticStyle:{"margin-bottom":"10px","margin-top":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v(t._s(t.tableInfo.announce_content)+":")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"1px solid #cecece","padding-left":"20px"},domProps:{innerHTML:t._s(t.curRow.announce_content)}})]):t._e(),1==t.curRow.main_table_status?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("a-table",{attrs:{columns:t.columns,dataSource:t.data,loading:t.loading,pagination:!1}})]],2):t._e(),null!=this.curRow&&1!=this.curRow.fileStatus&&"print"!=this.pageType&&this.curRow.fileType.includes("office")?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"98%"}},[a("a-divider",{staticStyle:{width:"98%"},attrs:{dashed:""}})],1)]):t._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType?a("a-col",{staticStyle:{"margin-top":"2px"},attrs:{span:24}},[[this.curRow.fileType.includes("office")?a("div",{class:[1!=this.curRow.fileStatus?"fileshow":"filenone"],staticStyle:{width:"100%",display:"block"}},[a("div",{staticClass:"no-print",staticStyle:{"text-align":"right"}},[a("iframe",{directives:[{name:"print",rawName:"v-print",value:"#printContent",expression:"'#printContent'"}],staticClass:"no-print fileview-iframe",staticStyle:{display:"block",width:"95%",align:"left",height:"720px","overflow-y":"auto","overflow-x":"hidden",border:"1px solid #cecece","border-bottom":"1px solid #cecece"},attrs:{name:"fileviewFrame",id:"fileviewFrame",src:this.curRow.fileURL}})])]):t._e()]],2):t._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType?a("a-col",{staticStyle:{"margin-top":"15px"},attrs:{span:24}},[[a("div",{staticClass:"office-container",staticStyle:{"margin-top":"0px"}},t._l(t.curRow.officeList,(function(e,n){return a("div",{key:n,staticClass:"ant-upload-list-item-info"},[a("span",{staticStyle:{"hover{background":"#efeffe"}},[a("a",{staticClass:"ant-upload-list-item-name",staticStyle:{float:"left","margin-left":"-20px","margin-top":"5px","border-bottom":"1px solid #f0f0f0","hover{background":"#efeffe"},attrs:{rel:"noopener noreferrer"}},[a("a-icon",{staticStyle:{float:"left","margin-top":"4px","margin-right":"5px"},attrs:{type:"file"}}),a("span",{staticStyle:{float:"left",width:"80%","margin-top":"4px","margin-right":"5px","hover{background":"#efeffe",cursor:"point"},attrs:{type:"file",target:"_blank",title:e.title},on:{click:function(a){return t.handlePreview(e)}}},[t._v(t._s(e.name))]),a("a-icon",{staticStyle:{float:"right","margin-top":"4px",width:"10%","margin-right":"5px","hover{background":"#efeffe",cursor:"point"},attrs:{type:"download"},on:{click:function(a){return t.handleDownLoad(e)}}})],1)])])})),0)]],2):t._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType&&this.curRow.fileType.includes("image")?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"98%"}},[a("a-divider",{staticStyle:{width:"98%"},attrs:{dashed:""}},[t._v("·")])],1)]):t._e(),1!=this.curRow.fileStatus&&"print"!=this.pageType?a("a-col",{staticStyle:{"margin-top":"2px"},attrs:{span:24}},[[this.curRow.fileType.includes("image")?a("div",{class:[1!=this.curRow.fileStatus?"fileshow":"filenone"],staticStyle:{"margin-botton":"0px"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[t._v("图片附件")]),a("vue-preview",{attrs:{slides:t.slides},on:{close:t.handleClose,click:t.handleImgClick}})],1):t._e()]],2):t._e(),1!=t.curRow.bpm_status||t.workflows.length>0?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{width:"98%"}},[a("a-divider",{staticStyle:{width:"98%"},attrs:{dashed:""}},[t._v("·")])],1)]):t._e(),(1!=t.curRow.bpm_status||t.workflows.length>0)&&"print"!=t.pageType?a("a-col",{staticStyle:{"margin-top":"10px","margin-bottom":"20px"},attrs:{span:24}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("流程进度")]),[a("a-steps",{staticStyle:{width:"80%","margin-bottom":"10px"}},[a("a-step",{attrs:{status:t.wflowstatus.start.status,title:"发起"}},[a("a-icon",{attrs:{slot:"icon",type:"user"},slot:"icon"})],1),a("a-step",{attrs:{status:t.wflowstatus.audit.status,title:"审核"}},[a("a-icon",{attrs:{slot:"icon",type:"solution"},slot:"icon"})],1),a("a-step",{attrs:{status:t.wflowstatus.approve.status,title:"审批"}},[a("a-icon",{attrs:{slot:"icon",type:"audit"},slot:"icon"})],1),a("a-step",{attrs:{status:t.wflowstatus.message.status,title:"知会"}},[a("a-icon",{attrs:{slot:"icon",type:"mail"},slot:"icon"})],1)],1),a("br")],a("div",{staticStyle:{width:"98%","margin-top":"10px","margin-bottom":"10px"}},[a("a-divider",{staticStyle:{width:"98%"},attrs:{dashed:""}},[t._v("·")])],1)],2):t._e(),1!=t.curRow.bpm_status||t.workflows.length>0?a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[t._v("审批流程")]),[a("a-timeline",t._l(t.workflows,(function(e,n){return a("div",{key:n},[a("a-timeline-item",{attrs:{color:e.color}},["wait"==e.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"clock-circle-o",theme:"twoTone",twoToneColor:"#eb2f2f",color:e.color},slot:"dot"}):t._e(),"start"==e.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"tag",theme:"twoTone",twoToneColor:"#5599FF",color:e.color},slot:"dot"}):t._e(),"cancel"==e.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"close-circle",theme:"twoTone",twoToneColor:"#ff0000",color:e.color},slot:"dot"}):t._e(),"agree"==e.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"check-circle",theme:"twoTone",twoToneColor:"#52ce1a",color:e.color},slot:"dot"}):t._e(),"message"==e.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"mail",theme:"twoTone",twoToneColor:e.color,color:e.color},slot:"dot"}):t._e(),"over"==e.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"flag",theme:"twoTone",twoToneColor:e.color,color:e.color},slot:"dot"}):t._e(),"sound"==e.status?a("a-icon",{staticStyle:{"font-size":"16px"},attrs:{slot:"dot",type:"sound",theme:"twoTone",twoToneColor:"orange",color:e.color},slot:"dot"}):t._e(),t._v("\n                  "+t._s(e.content)+"\n                ")],1)],1)})),0)]],2):t._e(),"undefined"!=typeof t.tableInfo.traffic_numbers&&null!=t.tableInfo.traffic_numbers?a("a-col",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"},attrs:{span:24}},[a("span",{staticStyle:{float:"left",display:"block"}},[t._v("注:")]),a("div",{staticStyle:{float:"left",width:"88%",display:"block","border-bottom":"0px solid #cecece","padding-left":"20px"}},[a("p",[t._v("1. 此表批准后原价由综合部存档，复印件交财务部。")]),a("p",[t._v("2. 此表批准日期在15号（含15号）以前则从当月开始享有车辆补贴，在15号以后则从下月开始享有。")]),a("p",[t._v("3. 驾驶证、行驶证和身份证的复印件是该表的必备附件，驾驶证必须是申请人本人证件，行驶证与驾驶证户名不一致，需另附行驶证所有人的身份证复印件及关系证明、书面说明。")])])]):t._e(),"workflowing"==t.pageType&&1==t.curRow.bpm_status?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"审核用户"}},[a("j-select-multi-user",{model:{value:t.wflowUsers,callback:function(e){t.wflowUsers=e},expression:"wflowUsers"}})],1),a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"审批用户"}},[a("j-select-multi-user",{model:{value:t.approveUser,callback:function(e){t.approveUser=e},expression:"approveUser"}})],1),a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"知会用户"}},[a("j-select-multi-user",{model:{value:t.notifyUsers,callback:function(e){t.notifyUsers=e},expression:"notifyUsers"}})],1)],1)],[a("div",{staticStyle:{width:"88%","margin-top":"10px"}},["workflowing"==t.pageType||"notifying"==t.pageType?a("a-button",{attrs:{ghost:"",type:"primary"},on:{click:t.handleSubmitWF}},[t._v("提交")]):t._e()],1)]],2):t._e(),"notifying"==t.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{staticStyle:{width:"500px"},attrs:{label:"知会用户"}},[a("j-select-multi-user",{model:{value:t.notifyUsers,callback:function(e){t.notifyUsers=e},expression:"notifyUsers"}})],1)],1)],[a("div",{staticStyle:{width:"88%","margin-top":"10px"}},["workflowing"==t.pageType||"notifying"==t.pageType?a("a-button",{attrs:{ghost:"",type:"primary"},on:{click:t.handleSubmitWF}},[t._v("提交")]):t._e()],1)]],2):t._e(),"workflow"==t.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("div",{staticStyle:{width:"88%"}},[a("a-textarea",{staticStyle:{align:"left","text-align":"left"},attrs:{placeholder:"请输入审批意见",autosize:{minRows:2,maxRows:10}},model:{value:t.curRow.idea_content,callback:function(e){t.$set(t.curRow,"idea_content",e)},expression:"curRow.idea_content"}})],1),a("div",{staticStyle:{width:"88%","margin-top":"10px"}},[a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#2090fe",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:t.handleApproveWF}},[t._v("同意")]),a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#fe5050",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:t.handleRejectWF}},[t._v("驳回")])],1)]],2):t._e(),"notify"==t.pageType?a("a-col",{staticStyle:{"margin-top":"30px"},attrs:{span:24}},[[a("div",{staticStyle:{width:"88%"}},[a("a-textarea",{staticStyle:{align:"left","text-align":"left"},attrs:{placeholder:"请输入知会意见",autosize:{minRows:2,maxRows:10}},model:{value:t.curRow.idea_content,callback:function(e){t.$set(t.curRow,"idea_content",e)},expression:"curRow.idea_content"}})],1),a("div",{staticStyle:{width:"88%","margin-top":"10px"}},[a("a-button",{staticStyle:{"margin-right":"10px","margin-top":"10px","background-color":"#2090fe",border:"1px solid #fefefe"},attrs:{type:"primary"},on:{click:t.handleConfirmWF}},[t._v("确认")])],1)]],2):t._e(),a("a-modal",{attrs:{title:"温馨提示",visible:t.tipVisible,confirmLoading:t.tipConfirmLoading},on:{ok:t.tipHandleOk,cancel:t.tipHandleCancel}},[a("p",[t._v(t._s(t.tipContent))])])],1)])],1)])},r=[],i=(a("ac4d"),a("8a81"),a("ac6a"),a("28a5"),a("6762"),a("2fdb"),a("96cf"),a("3b8d")),o=a("0fea"),s=a("5d2d"),c=a("ca00"),l=a("17fb"),u=a("da05"),p=a("290c"),d=a("261e"),f=a("0f9d"),m=[],_={components:{ATextarea:d["a"],ARow:p["a"],ACol:u["b"],JSelectMultiUser:f["default"]},name:"Printgzsld",props:{reBizCode:{type:String,default:""}},data:function(){return{columns:[],data:[],loading:!1,labelCol:{xs:{span:24},sm:{span:2}},wrapperCol:{xs:{span:24},sm:{span:8}},formName:"流程申请单",curRow:{},depart:{},fileinfo:"",workflows:[],pageType:"view",tableName:"",wflowUsers:"",notifyUsers:"",approveUser:"",tableInfo:"",tipVisible:!1,tipContent:"",slides:m,wflowstatus:{},form:this.$form.createForm(this)}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["V"](this);case 2:return e=t.sent,t.next=5,o["a"](e,this);case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{$route:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["V"](this);case 2:return e=t.sent,t.next=5,o["a"](e,this);case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},methods:{loadData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["V"](this);case 2:return e=t.sent,t.next=5,o["a"](e,this);case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getDate:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),tipHandleOk:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.tipConfirmLoading=!0,setTimeout((function(){e.loadData(),e.tipVisible=!1,e.tipConfirmLoading=!1}),300);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),tipHandleCancel:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadData(),this.tipVisible=!1;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getFormFieldValue:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",this.form.getFieldValue(e));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handlePrint:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.curRow.fileStatus=1,setTimeout((function(){e.curRow.fileStatus=0}),1e4);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleQRCode:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),handleShortURL:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),handlePreview:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["S"](e.fileURL);case 2:a=t.sent,a?window.open(e.src):window.open(window._CONFIG["previewURL"]+e.msrc);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),handleDownLoad:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:window.open(e.msrc);case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),handleApproveWF:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$confirm("是否确认提交此自由流程?","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,u,p,d,f,m,_,b,y,w,h,g,x,v,R,S,k,O,I,T,C,N,$,L,M,j,J,F,P,D,U;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=s["b"]("cur_user"),i=c["d"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),u=u||"同意",p=p||e.curRow.idea_content||"同意",d=a.curRow,f=c["f"]("processLogID"),m=c["f"]("table_name"),_=null,b=[],y=null,w=null,h=null,g=null,t.prev=14,t.next=17,o["B"](m,f);case 17:d=t.sent,t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](14);case 23:if(""!=c["b"](d)){t.next=26;break}return a.$message.warning("未找到下一节点的流程信息，请刷新页面，查看是否已经审批完成！"),t.abrupt("return",!1);case 26:if(y=d["business_data_id"],w=d["process_audit"],c["b"](d["employee"]).includes(r["username"])||c["b"](d["employee"]).includes(r["realname"])){t.next=31;break}return a.$message.warning("您不在此审批流程记录的操作职员列中，无法进行审批操作！"),t.abrupt("return",!1);case 31:return t.prev=31,t.next=34,o["A"](m,y);case 34:b=t.sent,t.next=40;break;case 37:t.prev=37,t.t1=t["catch"](31);case 40:return l["each"](b,(function(t){var e=t["create_time"];t["approve_user"]=r["username"],t["action"]=u,t["operate_time"]=i,t["action_opinion"]=p,t["create_time"]=c["d"](e,"yyyy-MM-dd hh:mm:ss")})),h=JSON.parse(JSON.stringify(b)),t.next=44,o["u"](m);case 44:if(g=t.sent,a.fixedWFlow=g[0],a.rights=g,!(g.length>1&&"000000000"!=d.business_code)){t.next=53;break}return a.tipVisible=!0,a.tipContent="获取到此业务含有多个流程权责，请联系管理员进行配置！",t.abrupt("return",!1);case 53:if(!(g.length<=0&&"000000000"!=d.business_code)){t.next=59;break}return a.tipVisible=!0,a.tipContent="未获取到此业务的流程权责，无法同意审批！",t.abrupt("return",!1);case 59:if(x="",v="",R=w,S=""==c["b"](v)?"":v.split(","),"000000000"==d.business_code){t.next=78;break}t.prev=64,x=","+a.fixedWFlow["audit"]+","+a.fixedWFlow["approve"]+",",v=a.fixedWFlow["notify"],_=a.fixedWFlow["approve"],t.next=76;break;case 70:return t.prev=70,t.t2=t["catch"](64),a.tipVisible=!0,a.tipContent="固化流程设置节点失败，无法进行审批操作！",t.abrupt("return",!1);case 76:t.next=93;break;case 78:t.prev=78,k=JSON.parse(d.business_data),"audit_node"in k||"approve_node"in k||"notify_node"in k||(k=JSON.parse(k.business_data)),x=","+c["b"](k.audit_node)+","+c["b"](k.approve_node)+",",S=""==c["b"](k.notify_node)?[]:[k.notify_node],_=k.approve_node,R=d["employee"],t.next=93;break;case 87:return t.prev=87,t.t3=t["catch"](78),a.tipVisible=!0,a.tipContent="自由流程设置节点失败，无法进行审批操作！",t.abrupt("return",!1);case 93:if(O=x.split(","+R+","),I=O[1],T={},""!=I){t.next=155;break}T={bpm_status:"4"},C=!0,N=!1,$=void 0,t.prev=101,L=S[Symbol.iterator]();case 103:if(C=(M=L.next()).done){t.next=119;break}return j=M.value,t.next=107,o["K"](j);case 107:return J=t.sent,t.next=110,o["L"](j);case 110:return F=t.sent,P={},P="000000000"!=d.business_code?{id:o["M"](32),table_name:m,main_value:d["main_value"],business_data_id:d["business_data_id"],business_code:a.fixedWFlow["id"],process_name:a.fixedWFlow["items"],employee:J[0]["employee"],process_station:F[0]["item_text"],process_audit:j,operate_time:i,create_time:i,proponents:d["proponents"],content:d["content"],business_data:JSON.stringify(d)}:{id:o["M"](32),table_name:m,main_value:d["business_data_id"],business_data_id:d["business_data_id"],business_code:"000000001",process_name:"自由流程知会",employee:j,process_station:"自由流程知会",process_audit:"000000001",proponents:d["proponents"],content:d["content"],operate_time:i,create_time:i,business_data:d.business_data},t.next=115,o["p"](P);case 115:n=t.sent;case 116:C=!0,t.next=103;break;case 119:t.next=125;break;case 121:t.prev=121,t.t4=t["catch"](101),N=!0,$=t.t4;case 125:t.prev=125,t.prev=126,C||null==L.return||L.return();case 128:if(t.prev=128,!N){t.next=131;break}throw $;case 131:return t.finish(128);case 132:return t.finish(125);case 133:return D={id:o["M"](32),type:"approve",create_by:r["username"],create_time:i,table_name:m,table_id:d["business_data_id"],table_data:JSON.stringify(a.curRow),status:"wait",current_data:JSON.stringify({opeartion:"add",tableName:"PR_LOG",data:""}),history_data:JSON.stringify({operation:"add",tableName:"PR_LOG_HISTORY",data:h}),inform_data:JSON.stringify({operation:"add",tableName:"PR_LOG_INFORMED",data:P}),delete_data:JSON.stringify({operation:"delete",tableName:"PR_LOG",data:h}),origin_data:JSON.stringify({operation:"patch",tableName:m,id:d["business_data_id"],data:T}),trends_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),task_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),other_data:JSON.stringify({})},t.prev=134,t.next=137,o["q"]("BS_TRANSACTION",D);case 137:n=t.sent,t.next=143;break;case 140:t.prev=140,t.t5=t["catch"](134);case 143:return t.next=145,o["o"](h);case 145:return n=t.sent,t.next=148,o["c"](m,h);case 148:return n=t.sent,t.next=151,o["k"](m,d["business_data_id"],T);case 151:n=t.sent,a.tipContent="同意审批成功，审批流程处理完毕！",t.next=200;break;case 155:if(I=0==I.indexOf(",")?I.substring(1):I,I=I.split(",")[0],T=_==I?{bpm_status:"3"}:{bpm_status:"2"},P={},"000000000"==d.business_code){t.next=169;break}return t.next=162,o["K"](I);case 162:return J=t.sent,t.next=165,o["L"](I);case 165:F=t.sent,P={id:o["M"](32),table_name:m,main_value:d["main_value"],business_data_id:d["business_data_id"],business_code:a.fixedWFlow["id"],process_name:a.fixedWFlow["items"],employee:J[0]["employee"],process_station:F[0]["item_text"],process_audit:I,proponents:d["proponents"],content:d["content"],create_time:i,business_data:d.business_data},t.next=170;break;case 169:P={id:o["M"](32),table_name:m,main_value:d["business_data_id"],business_data_id:d["business_data_id"],business_code:"000000000",process_name:"自由流程审批",employee:I,process_station:"自由流程审批",process_audit:"000000000",proponents:d["proponents"],content:d["content"],operate_time:i,create_time:i,business_data:d.business_data};case 170:return t.next=172,o["t"](m,d["business_data_id"]);case 172:if(U=t.sent,!U){t.next=177;break}a.tipContent="处理异常，请稍后重试；如果多次处理异常，可能需要撤销当前审批，重新发起审批流程！",t.next=200;break;case 177:return D={id:o["M"](32),type:"next",create_by:r["username"],create_time:i,table_name:m,table_id:d["business_data_id"],table_data:JSON.stringify(a.curRow),status:"wait",current_data:JSON.stringify({opeartion:"add",tableName:"PR_LOG",data:P}),history_data:JSON.stringify({operation:"add",tableName:"PR_LOG_HISTORY",data:h}),inform_data:JSON.stringify({operation:"add",tableName:"PR_LOG_INFORMED",data:""}),delete_data:JSON.stringify({operation:"delete",tableName:"PR_LOG",data:h}),origin_data:JSON.stringify({operation:"patch",tableName:m,id:d["business_data_id"],data:T}),trends_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),task_data:JSON.stringify({opeartion:"add",tableName:"",data:""}),other_data:JSON.stringify({})},t.prev=178,t.next=181,o["q"]("BS_TRANSACTION",D);case 181:n=t.sent,t.next=187;break;case 184:t.prev=184,t.t6=t["catch"](178);case 187:return t.next=189,o["n"](P);case 189:return n=t.sent,t.next=192,o["o"](h);case 192:return n=t.sent,t.next=195,o["c"](m,h);case 195:return n=t.sent,t.next=198,o["k"](m,d["business_data_id"],T);case 198:n=t.sent,a.tipContent="同意审批成功，审批流程已推向后续处理人！";case 200:return a.tipVisible=!0,e.loadData(),e.pageType="view",t.abrupt("return",n);case 204:case"end":return t.stop()}}),t,null,[[14,20],[31,37],[64,70],[78,87],[101,121,125,133],[126,,128,132],[134,140],[178,184]])})))).catch(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleRejectWF:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$confirm("是否进行驳回审批操作?","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,u,p,d,f,m,_,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=s["b"]("cur_user"),i=c["d"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),u=u||"驳回",p=p||a.curRow.idea_content||"驳回",d=a.curRow,f=c["f"]("processLogID"),m=d["table_name"]||c["f"]("table_name"),_={bpm_status:"1"},t.next=11,o["B"](m,f);case 11:if(d=t.sent,c["b"](d["employee"]).includes(r["username"])||c["b"](d["employee"]).includes(r["realname"])){t.next=15;break}return a.$message.warning("您不在此审批流程记录的操作职员列中，无法进行驳回操作！"),t.abrupt("return",!1);case 15:return t.next=17,o["B"](m,d["id"]);case 17:return d=t.sent,t.next=20,o["A"](m,d["business_data_id"]);case 20:return b=t.sent,l["each"](b,(function(t){var e=t["create_time"];t["approve_user"]=r["username"],t["action"]=u,t["operate_time"]=i,t["action_opinion"]=p,t["create_time"]=c["d"](e,"yyyy-MM-dd hh:mm:ss")})),t.next=24,o["o"](b);case 24:return n=t.sent,t.next=27,o["c"](m,b);case 27:return n=t.sent,t.next=30,o["k"](m,d["business_data_id"],_);case 30:return n=t.sent,a.tipVisible=!0,a.tipContent="驳回审批成功！",e.pageType="view",e.loadData(),t.abrupt("return",n);case 36:case"end":return t.stop()}}),t)})))).catch(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleConfirmWF:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$confirm("是否进行确认知会操作?","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,l,u,p,d,f,m,_,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,r=s["b"]("cur_user"),i=c["d"]((new Date).getTime(),"yyyy-MM-dd hh:mm:ss"),l=l||"知会",u=u||a.curRow.idea_content||"知会确认",p=a.curRow,d=c["f"]("processLogID"),f=c["f"]("table_name"),m={bpm_status:"5"},t.next=11,o["G"](f,d);case 11:if(p=t.sent,p["create_time"]=i,!(c["b"](p["approve_user"]).length>=c["b"](p["employee"]).length)){t.next=32;break}return t.prev=14,t.next=17,o["o"](p);case 17:return n=t.sent,t.next=20,o["d"](f,[p]);case 20:return n=t.sent,t.next=23,o["k"](f,p["business_data_id"],m);case 23:n=t.sent,t.next=29;break;case 26:t.prev=26,t.t0=t["catch"](14);case 29:return a.tipVisible=!0,a.tipContent="知会确认成功！",t.abrupt("return",!0);case 32:if(_=","+c["b"](p["employee"])+",",b=","+c["b"](p["approve_user"])+",",c["b"](_).includes(","+r["username"]+",")||c["b"](_).includes(","+r["realname"]+",")){t.next=37;break}return a.$message.warning("您不在此知会记录的操作职员列中，无法进行确认操作！"),t.abrupt("return",!1);case 37:if(!c["b"](b).includes(","+r["username"]+",")&&!c["b"](b).includes(","+r["realname"]+",")){t.next=40;break}return a.$message.warning("您已经在此知会记录中，执行过确认操作了！"),t.abrupt("return",!1);case 40:return p["approve_user"]=c["b"](p["approve_user"])+(""==c["b"](p["approve_user"])?"":",")+r["username"],p["action"]=l,p["operate_time"]=i,p["action_opinion"]=c["b"](p["action_opinion"])+(""==c["b"](p["action_opinion"])?"":"\n\r")+"".concat(r["username"],":").concat(u),t.next=46,o["k"]("PR_LOG_INFORMED",p["id"],p);case 46:if(!(p["approve_user"].length>=p["employee"].length)){t.next=62;break}return t.prev=47,t.next=50,o["o"](p);case 50:return n=t.sent,t.next=53,o["d"](f,[p]);case 53:return n=t.sent,t.next=56,o["k"](f,p["business_data_id"],m);case 56:n=t.sent,t.next=62;break;case 59:t.prev=59,t.t1=t["catch"](47);case 62:return a.tipVisible=!0,a.tipContent="知会确认成功！",e.pageType="view",e.loadData(),t.abrupt("return",n);case 67:case"end":return t.stop()}}),t,null,[[14,26],[47,59]])})))).catch(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSubmitWF:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$confirm("是否确认提交此自由流程?","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,l,u,p,d,f,m,_,b,y;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=s["b"]("cur_user"),n=e.wflowUsers,r=e.notifyUsers,i=e.approveUser,l=c["d"](new Date,"yyyy-MM-dd hh:mm:ss"),""!=c["b"](i)||"workflowing"!=e.pageType){t.next=8;break}return e.$confirm_({title:"温馨提示",content:"请选择审批用户!"}),t.abrupt("return",!1);case 8:if(!c["b"](i).includes(",")||"workflowing"!=e.pageType){t.next=11;break}return e.$confirm_({title:"温馨提示",content:"审批用户只能选择一个!"}),t.abrupt("return",!1);case 11:if(""!=c["b"](r)||"notifying"!=e.pageType){t.next=14;break}return e.$confirm_({title:"温馨提示",content:"请选择知会用户!"}),t.abrupt("return",!1);case 14:if(u=c["f"]("table_name"),p={id:o["M"](32),create_by:a["username"],create_time:l,table_name:u,main_key:c["f"]("id"),audit_node:c["b"](n),approve_node:c["b"](i),notify_node:c["b"](r)},""==c["b"](i)||"workflowing"!=e.pageType){t.next=50;break}return t.next=19,o["m"](p);case 19:return t.sent,d=JSON.parse(JSON.stringify(p)),p={id:o["M"](32),table_name:u,main_value:c["f"]("id"),business_data_id:c["f"]("id"),business_code:"000000000",process_name:"自由流程审批",employee:a["username"],process_station:"自由流程审批",process_audit:"000000000",proponents:a["username"],approve_user:a["username"],action:"发起",action_opinion:"发起自由流程",content:e.curRow["content"],operate_time:l,create_time:l,business_data:JSON.stringify(d)},t.next=24,o["o"](p);case 24:return t.sent,f=""==c["b"](n)?c["b"](i):c["b"](n).split(",")[0],p={id:o["M"](32),table_name:u,main_value:c["f"]("id"),business_data_id:c["f"]("id"),business_code:"000000000",process_name:"自由流程审批",employee:f,process_station:"自由流程审批",process_audit:"000000000",proponents:a["username"],content:e.curRow["content"],operate_time:l,create_time:l,business_data:JSON.stringify(p)},t.next=29,o["t"](u,e.curRow["id"]);case 29:if(m=t.sent,!m){t.next=36;break}return e.$confirm_({title:"温馨提示",content:"待审记录中，已经存在此记录，无法再次提交审批！"}),e.loadData(),t.abrupt("return",!0);case 36:return t.next=38,o["n"](p);case 38:return t.sent,t.next=42,o["k"](u,e.curRow["id"],{bpm_status:"2"});case 42:return t.sent,t.next=45,o["k"](u,e.curRow["id"],{bpm_status:"2"});case 45:return t.sent,e.$confirm("提交自由流程审批成功！","操作成功",{type:"success"}),e.pageType="view",e.loadData(),t.abrupt("return",!0);case 50:if(""==c["b"](r)||"notifying"!=e.pageType){t.next=74;break}return t.next=53,o["O"](u,c["f"]("id"));case 53:return _=t.sent,t.next=56,o["z"](c["f"]("id"));case 56:if(b=t.sent,4==_["bpm_status"]||5==_["bpm_status"]){t.next=60;break}return e.$confirm_({title:"温馨提示",content:"此表单业务尚未审批通过，无法进行知会操作！"}),t.abrupt("return",!0);case 60:if(!(""!=c["b"](b)&&b.today>=3)){t.next=63;break}return e.$confirm_({title:"温馨提示",content:"同一业务数据，每天最多知会3次！"}),t.abrupt("return",!0);case 63:if(!(""!=c["b"](b)&&b.total>=10)){t.next=66;break}return e.$confirm_({title:"温馨提示",content:"同一业务数据，总计最多知会10次！"}),t.abrupt("return",!0);case 66:return y={id:o["M"](32),table_name:u,main_value:c["f"]("id"),business_data_id:c["f"]("id"),business_code:"000000001",process_name:"自由流程知会",employee:c["b"](r),process_station:"自由流程知会",process_audit:"000000001",operate_time:l,create_time:l,proponents:a["username"],content:e.curRow["content"],business_data:JSON.stringify(e.curRow)},t.next=69,o["p"](y);case 69:return t.sent,e.$confirm("知会操作成功！","操作成功",{type:"success"}),e.pageType="view",e.loadData(),t.abrupt("return",!0);case 74:case"end":return t.stop()}}),t)})))).catch(Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",!1);case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},b=_,y=(a("d632"),a("2877")),w=Object(y["a"])(b,n,r,!1,null,"46bc8dc0",null);e["default"]=w.exports},cf37:function(t,e,a){},d632:function(t,e,a){"use strict";var n=a("3c37"),r=a.n(n);r.a}}]);